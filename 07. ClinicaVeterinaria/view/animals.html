<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animals</title>

    <style>
        #table table {
            font-family: arial, sans-serif;
            border-collapse: collapse;
        }

        #table td, th {
            border: 1px solid #dddddd;
            text-align: center;
            padding: 8px;
        }
    </style>
</head>

<body>

    <script type="module">

        import { getAnimals } from '../service/AnimalService.js';

        function print(animals) {
            let table = '<table>'
            table += '<tr>';
            table += '<th>Nombre</th>';
            table += '<th>Sexo</th>';
            table += '<th>Número registro</th>';
            table += '<th>Tipo de animal</th>';
            table += '<th>Ficha</th>';
            table += '</tr>';

            animals.forEach(animal => {
                table += "<tr>";
                table += "<td>" + animal.name + "</td>"
                table += "<td>" + animal.sex + "</td>"

                if (animal.registryNumber == null) {
                    table += "<td> Sin número </td>"

                } else {
                    table += "<td>" + animal.registryNumber + "</td>"
                }
                table += "<td>" + animal.type + "</td>";
                table += "<td><a href='animalForm.html?identificador=" + animal.id + "'>" + "Ficha" + "</a></td>";
                table += "</tr>";
            });

            table += '</table>';

            document.querySelector('#table').innerHTML = table;
        }

        function init() {
            const animals = getAnimals();
            print(animals);
        }

        // window.addEventListener('load', init)

        (function() {
            init()
        })()
    </script>

    <div id="table"></div>

</body>

</html>